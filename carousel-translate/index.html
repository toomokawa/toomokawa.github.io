<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
	<link rel="stylesheet" type="text/css" href="../reset.css">
	<link rel="stylesheet" type="text/css" href="style.css">
	<title>carousel translate ver.</title>
</head>
<body>
<div id="wrapper">
	<p style="padding: 10px"><a href="https://toomokawa.github.io/">Home</a></p>
	<div id="carousel-area">
		<ol class="c-o">
			<li class="c-l" style="width: 112px;"><img src="img/test1.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test2.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test3.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test2.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test3.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test1.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test3.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test1.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test2.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test1.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test2.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test3.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test2.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test3.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test1.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test3.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test1.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test2.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test1.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test2.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test3.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test2.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test3.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test1.jpg"></li>
			<li class="c-l" style="width: 112px;"><img src="img/test3.jpg"></li>
		</ol>
	</div>
	<div style="margin: 10px 0 0 10px;"><button id="cl">slide</button></div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript">
	$(function (){
		var windowWidth,
			olWidth,
			marginLeft,
			slideWidth,
			slideListTotal,
			restWidth,
			half,
			f,
			lastSlide;

		// 読み込み＆リサイズ時、liを調整
		$(window).on('load resize', function() {
			windowWidth = $(window).width();
			marginLeft = 15;
			half = ($('.c-l').width() / 2);

			// 画面サイズに応じてliのスライドする数を決める
			for (var i = 1; i <= $('.c-l').length; i++) {
				slideWidth = ($('.c-l').width() + marginLeft) * i;

				// 画面サイズ - スライド横幅 < margin-leftだった場合、ブレーク
				restWidth = windowWidth - slideWidth;
				if (restWidth < marginLeft) {
					slideListTotal = i - 1;
					slideWidth = ($('.c-l').width() + marginLeft) * slideListTotal;
					break;
				}
			}

			// 見切れるliが半分以下で表示されるまで、margin-leftを1pxずつ増やす
			while (half < windowWidth - (slideWidth + marginLeft)) {
				marginLeft += 1;
				slideWidth = ($('.c-l').width() + marginLeft) * slideListTotal;
			}

			// olのwidthを再設定
			olWidth = ($('.c-l').width() + marginLeft) * 25;
			$('.c-o').css('width', olWidth+'px');

			// liのmargin-leftを再設定
			$('.c-l').each(function() {
				$(this).css('margin-left', marginLeft + 'px');
			});

			// スライドされる最後のマイナス値を取得
			// リサイズの場合はリストを先頭に戻す
			f = 0;
			lastSlide = olWidth - ($('.c-l').width() + marginLeft);
			$('.c-o').css('-webkit-transform', 'translate3d(' + f + 'px, 0px, 0px)');
		});

		// slide
		$('#cl').click(function() {
			if (-f === lastSlide) {
				return;
			} else {
				f = f - slideWidth;	
				$('.c-o').css({
					'-webkit-transform':'translate3d(' + f + 'px, 0px, 0px)',
					'-webkit-transition-duration':'0.5s'
				});
			}
		});
	});
</script>
</body>
</html>